# Набор данных

Для удобной работы с данными (сортировка, пагинация и выборка), 
создан спецальный класс, который является оберткой над любым типом данных (для каждого типа требуется своя реализация) 
и вместе с тем унифицированным интерфейсов для доступа к ним.

## Структура

Состоит набор данных из компонентов:

1. Данные
1. Сортировщик - отвечает за сортировку данных
1. Пагинатор - отвечает за разбивку данных по страницам

## Данные

Класс `DataSet` отвечает за предоставление унифицированного доступа к данным, 
которым в последствии пользуются сортировщик и пагинатор.

```php
$dataset = new DataSet($data);
/*
 * первый элемент (с учетом сортировки и пагинации)
 */
$dataset->get(0);
/*
 * установка данных
 */
$dataset->set(50, 'value');
/*
 * найти первый элемент на текущей странице (3 параметр: true), 
 * который удовлетворяет условию: $row['name'] === 'искомое имя'
 */
$dataset->find("name", "искомое имя", true);
```

## Сортировщик

Класс `Sorter` отвечает за сортировку данных представленных набором.
Пример работы:
```php
$dataset = new DataSet($data);
/*
 * создаем сортировкщика на все поля
 */
$dataset->sorter = new Sorter();
/*
 * создаем сортировкщика на конкретные поля
 */
$dataset->sorter = new Sorter(["field1","field2","field3"]);
/*
 * по умолчанию устанавливается натуральная сортировка по убыванию и возрастанию
 * при необходимости можно установить на каждое поле свой тип сортировки
 */
$dataset->sorter->setSortType("field4", Sorter::ASC_NATURAL, Sorter::DESC);
```

Внимание: если Вы работаете с набором данных `ResultDataSet`, 
то при сортировке будут выгружаться **все** данные в массив, 
после чего будет проводиться сортировка.
При размере выборки более 500, выбросится исключение с вежливым сообщением о неразумности использования сортировки в данной ситуации.

Отключить данное поведение можно отключив свойство отладки:
```php
$dataset->debug = false;
```

## Пагинатор

Класс `Paginator` отвечает за разбивку большого объема данных на порции (страницы).
Пример работы:
```php
$dataset = new DataSet($data);
/*
 * разбивка на страницы по 50 штук и в данный момент выбрана 3-я страница
 */
$dataset->paginator = new Paginator($totalCount, 50, 3);
/*
 * либо все эти свойства можно указать отдельно
 * общее количество автоматически вычисляется из данных
 */
$dataset->paginator->totalCount = $totalCount;
$dataset->paginator->perPage = 50;
$dataset->paginator->nowPage = 3;
```